(()=>{"use strict";function t(t){let e=0;return e=void 0===t?0:t,console.log("Current active index",e),e}function e(n,o){let a;if(a="all"===n?o:t(n),document.querySelector(".displayProj")&&"all"===n);else for(;document.querySelector(".displayProj");)document.querySelector(".displayProj").remove(),console.log("Removed dispayProj");const i=document.createElement("div");i.classList.add("displayProj"),i.setAttribute("id",`dp${a}`);const d=document.createElement("h3");d.textContent=`${r.projectList[a].name}`,d.classList.add("projTitleDisplay"),i.appendChild(d);let s=0;r.projectList[a].tasks.forEach((t=>{const n=document.createElement("div"),o=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div");o.textContent+=`${t.title}`,d.textContent+=`${t.description}`,c.textContent+=`${t.priority}`,l.textContent+=`${t.dueDate}`;const m=document.createElement("button");m.setAttribute("id",`edit${s}`),m.classList.add("editBtn"),m.addEventListener("click",(t=>{const n=t.target.getAttribute("id").substring(4);N(a,"editMode",n),e(a)}));const p=document.createElement("button");p.setAttribute("id",`del${s}`),p.classList.add("delBtn"),p.addEventListener("click",(t=>{const n=t.target.getAttribute("id").substring(3);console.log(r.projectList[a]),r.projectList[a].tasks.splice(n,1),e(a)})),u.appendChild(m),u.appendChild(p),n.appendChild(o),n.appendChild(d),n.appendChild(c),n.appendChild(l),n.appendChild(u),n.classList.add("taskDiv"),n.classList.add(`${s}`),i.appendChild(n),s+=1})),document.querySelector(".innerGrid").appendChild(i),document.querySelector(".dashHeader")&&(document.querySelector(".dashHeader").remove(),console.log("deleted dashboard header"))}function n(t){const o=document.querySelector(".sidebar");o.innerHTML="";const a=document.createElement("div");a.classList.add("newProj");const i=document.createElement("label");i.setAttribute("for","nameProjLabel"),i.setAttribute("id","nameProjLabel");const d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","nameProjInput"),d.setAttribute("name","nameProjInput"),d.setAttribute("placeholder","Create a new Project");const s=document.createElement("button");s.classList.add("addProjBtn"),s.setAttribute("id","addProjBtn"),s.addEventListener("click",(()=>{const t=r.projectList.length;r.createProject(d.value),n(),console.log("Loading",t),e(t),N(t)})),a.appendChild(i),a.appendChild(d),a.appendChild(s),o.appendChild(a);const c=document.createElement("button");c.textContent="Dashboard",c.classList.add("dashboard"),c.addEventListener("click",(()=>{!function(){const t=document.querySelector(".innerGrid");t.innerHTML="",console.log(r.projectList.length,r.projectList,r.projectList[0]);for(let t=0;t<r.projectList.length;t++)e("all",t),console.log(t+": "+r.projectList[t]);const n=document.createElement("h2");n.textContent+="Dashboard",n.classList.add("dashHeader"),t.insertBefore(n,t.firstChild),console.log(currentIndex)}()})),o.appendChild(c);let l=0;r.projectList.forEach((t=>{const a=document.createElement("button");a.classList.add("sidebarBtn"),a.classList.add("delBtn"),a.setAttribute("id","delBtn"),a.addEventListener("click",(t=>{const o=parseInt(t.target.parentNode.getAttribute("id").substring(5));!function(t,o){if(t.target&&t.target.matches("#delBtn")){const a=t.target.parentNode,i=parseInt(a.getAttribute("id").substring(5));if(r.projectList.splice(i,1),n(),o=parseInt(document.querySelector(".displayProj").getAttribute("id").substring(2)))return void e(o-1);e(i)}}(t,o)}));const i=document.createElement("button");i.classList.add("sidebarBtn"),i.classList.add("editBtn"),i.setAttribute("id","editBtn"),i.addEventListener("click",(t=>{const n=parseInt(t.target.parentNode.getAttribute("id").substring(5));console.log("loading task numba:",n),N(n),e(n)}));const d=document.createElement("div");d.setAttribute("id",`task-${l}`),d.classList.add("sidebarDiv");const s=document.createElement("div");s.classList.add("projTitle"),s.textContent=`${t.name}`,d.appendChild(s);const c=document.createElement("div");c.classList.add("sBtnsDiv"),c.appendChild(i),c.appendChild(a),d.appendChild(c),o.appendChild(d),d.appendChild(i),d.appendChild(a),l+=1}))}const r=function(){const t=JSON.parse(localStorage.getItem("projectList"))||[];function e(){localStorage.setItem("projectList",JSON.stringify(t))}return{showList:function(){console.log("Here's the project list: ",t)},createProject:function(n){t.push({name:n,tasks:[]}),e()},addTask:function(n,r,o,a,i){t[n].tasks.push(function(t,e,n,r){return{title:t,description:e,priority:n,dueDate:r}}(r,o,a,i)),e()},editTask:function(n,r,o,a,i,d){t[n].tasks[r].title=o,t[n].tasks[r].description=a,t[n].tasks[r].priority=i,t[n].tasks[r].dueDate=d,e()},projectList:t}}();function o(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t){o(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===a(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function d(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const s={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return d("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):d(n+1,2)},d:function(t,e){return d(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return d(t.getUTCHours()%12||12,e.length)},H:function(t,e){return d(t.getUTCHours(),e.length)},m:function(t,e){return d(t.getUTCMinutes(),e.length)},s:function(t,e){return d(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return d(Math.floor(r*Math.pow(10,n-3)),e.length)}};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var u=/(\w)\1*|''|'(''|[^'])+('|$)|./g,m=/^'([^]*?)'?$/,p=/''/g,f=/[a-zA-Z]/;function g(t,e){o(2,arguments);var n=i(t);if(!function(t){if(o(1,arguments),!function(t){return o(1,arguments),t instanceof Date||"object"===c(t)&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;var e=i(t);return!isNaN(Number(e))}(n))throw new RangeError("Invalid time value");var r=function(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}(n),a=function(t,e){return o(2,arguments),function(t,e){o(2,arguments);var n=i(t).getTime(),r=l(e);return new Date(n+r)}(t,-l(e))}(n,r),d=e.match(u);return d?d.map((function(t){if("''"===t)return"'";var e,n,r=t[0];if("'"===r)return(n=(e=t).match(m))?n[1].replace(p,"'"):e;var o=s[r];if(o)return o(a,t);if(r.match(f))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return t})).join(""):""}Math.pow(10,8);var h=6e4,b=36e5;var y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},v=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,C=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,E=/^([+-])(\d{2})(?::?(\d{2}))?$/;function L(t){return t?parseInt(t):1}function D(t){return t&&parseFloat(t.replace(",","."))||0}var T=[31,null,31,30,31,30,31,31,30,31,30,31];function S(t){return t%400==0||t%4==0&&t%100!=0}function N(a,i,d){document.querySelector(".form")&&document.querySelector(".form").remove();let s=!1;a=t(a);const c=r.projectList[a];if(console.log("This is mi PI",a),"editMode"===i&&(s=!0,console.log("EDITING",a,d),console.log(c.tasks[d].title)),document.querySelector(".form")&&!s)return;const u=document.createElement("div");if(u.classList.add("form"),u.setAttribute("dataIndex",a),s){const t=document.createElement("div");t.classList.add("pop-form-overlay"),document.body.appendChild(t),u.classList.add("pop-form")}const m=document.createElement("label");m.setAttribute("for","title"),m.setAttribute("id","titleLabel");const p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("id","title"),p.setAttribute("name","title"),p.setAttribute("placeholder","Task title"),s&&p.setAttribute("value",c.tasks[d].title);const f=document.createElement("label");f.setAttribute("for","description");const j=document.createElement("textarea");j.setAttribute("id","description"),j.setAttribute("name","description"),j.setAttribute("placeholder","Add a description"),s&&(j.textContent+=c.tasks[d].description);const A=document.createElement("label");A.setAttribute("for","priority"),A.textContent="Check if important";const k=document.createElement("input");k.setAttribute("id","priority"),k.type="checkbox",s&&"High priority"===c.tasks[d].priority&&(k.checked=!0);const w=document.createElement("label");w.setAttribute("for","date"),w.textContent="Due date:";const I=document.createElement("input");var M,x,U,B,P;I.setAttribute("type","date"),I.setAttribute("id","date"),I.setAttribute("name","date"),s?I.setAttribute("value",g(function(t,e){var n;o(1,arguments);var r=l(null!==(n=null==e?void 0:e.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var a,i=function(t){var e,n={},r=t.split(y.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?e=r[0]:(n.date=r[0],e=r[1],y.timeZoneDelimiter.test(n.date)&&(n.date=t.split(y.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var o=y.timezone.exec(e);o?(n.time=e.replace(o[1],""),n.timezone=o[1]):n.time=e}return n}(t);if(i.date){var d=function(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:t.slice((r[1]||r[2]).length)}}(i.date,r);a=function(t,e){if(null===e)return new Date(NaN);var n=t.match(v);if(!n)return new Date(NaN);var r=!!n[4],o=L(n[1]),a=L(n[2])-1,i=L(n[3]),d=L(n[4]),s=L(n[5])-1;if(r)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,d,s)?function(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var o=7*(e-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(e,d,s):new Date(NaN);var c=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(T[e]||(S(t)?29:28))}(e,a,i)&&function(t,e){return e>=1&&e<=(S(t)?366:365)}(e,o)?(c.setUTCFullYear(e,a,Math.max(o,i)),c):new Date(NaN)}(d.restDateString,d.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var s,c=a.getTime(),u=0;if(i.time&&(u=function(t){var e=t.match(C);if(!e)return NaN;var n=D(e[1]),r=D(e[2]),o=D(e[3]);return function(t,e,n){return 24===t?0===e&&0===n:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,r,o)?n*b+r*h+1e3*o:NaN}(i.time),isNaN(u)))return new Date(NaN);if(!i.timezone){var m=new Date(c+u),p=new Date(0);return p.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),p.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),p}return s=function(t){if("Z"===t)return 0;var e=t.match(E);if(!e)return 0;var n="+"===e[1]?-1:1,r=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,o)?n*(r*b+o*h):NaN}(i.timezone),isNaN(s)?new Date(NaN):new Date(c+u+s)}(c.tasks[d].dueDate),"yyyy-MM-dd")):I.setAttribute("value",g((x=(M=new Date).getFullYear(),U=M.getMonth(),B=M.getDate(),(P=new Date(0)).setFullYear(x,U,B+1),P.setHours(23,59,59,999),P),"yyyy-MM-dd"));const $=document.createElement("button");$.setAttribute("type","submit"),s?($.classList.add("editTask"),$.textContent="Edit task",$.addEventListener("click",(t=>{!function(t,e){if(t.target&&t.target.matches(".editTask")){const o=t.target.parentNode.getAttribute("dataIndex");console.log(o);const a=document.getElementById("title").value,i=document.getElementById("description").value,d=function(){let t="";return t=document.getElementById("priority").checked?"High priority":"Standard priority",t},s=document.getElementById("date").value;r.editTask(e,o,a,i,d(),s),r.showList(),n()}}(t,a),e(a),document.querySelector(".pop-form-overlay").remove(),document.querySelector(".form").remove(),N()}))):($.classList.add("addTask"),$.textContent="+ Add Task",$.addEventListener("click",(t=>{!function(t,o){if(t.target&&t.target.matches(".addTask")){const t=document.getElementById("title").value,a=document.getElementById("description").value,i=function(){let t="";return t=document.getElementById("priority").checked?"High priority":"Standard priority",t},d=document.getElementById("date").value;r.addTask(o,t,a,i(),d),r.showList(),n(),e(o),N(o)}}(t,a),e(a)})));const q=document.createElement("button");q.classList.add("cancelTask"),q.setAttribute("type","button"),q.textContent="Cancel",q.addEventListener("click",(function(){u.remove()})),q.addEventListener("click",(function(){u.remove(),document.querySelector(".pop-form-overlay").remove(),N()})),u.appendChild(m),u.appendChild(p),u.appendChild(f),u.appendChild(j),u.appendChild(A),u.appendChild(k),u.appendChild(w),u.appendChild(I),u.appendChild($),s&&u.appendChild(q);const H=document.querySelector(".innerGrid");H.insertBefore(u,H.firstChild)}!function(){const t=document.getElementById("content");t.replaceChildren();const r=document.createElement("h1");r.textContent+="Project one",t.appendChild(r);const o=document.createElement("div");o.classList.add("sidebar"),t.appendChild(o),n();const a=document.createElement("div");a.classList.add("innerGrid"),t.appendChild(a),N(),e()}()})();